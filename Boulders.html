
<html xmlns:th="http://www.w3.org/1999/xhtml" xmlns:spring="http://java.sun.com/xml/ns/javaee">
	<link rel="stylesheet" href="Styling.css">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
	<script	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>


<head>
	<title> Boulders </title>
</head>

<body onload = "showAll()">
	<div>
	<input type="button" onclick="location.href='FrontEnd.html'" value="All Climbs"/>
	<input type="button" onclick="location.href='Boulders.html'" value="Boulders"/>
	<input type="button" onclick="location.href='TopRopes.html'" value="Top Ropes"/>
	<input type="button" onclick="location.href='Leads.html'" value="Leads"/>
	<input type="button" onclick="location.href='Speeds.html'" value="Speeds"/>
	<input type="button" onclick="location.href='Records.html'" value="Records"/>
	<input type="button" onclick="location.href='Statistics.html'" value="Statistics"/>
	</div>
	
	<table class = "tableFixHead" id="BoulderTable" style = "width:50%">
		<tr>
			<td><label> id </label></td>
			<td><label> Grade </label></td>
			<td><label> Date </label></td>
			<td><label>Location </label></td>
			<td><label> Climber </label></td>
		</tr>
	</table>

	<script type="text/javascript">

		function clearTable(){
			for( let i = BoulderTable.rows.length - 1; i > 0; i--){
				BoulderTable.deleteRow(i);
			}
		}

		function checkValues(){
			let grade = document.getElementById("grade");
			let dateNum = document.getElementById("dateNum");
			let location = document.getElementById("location");
			let climber = document.getElementById("climber");
			
			if(grade.value === ""){
				alert("Please enter a grade for your climb");
				return false;
			} 
			
			if(dateNum.value === ""){
				alert("Please enter a date for your climb");
				return false;
			}
			
			if(location.value === ""){
				alert("Please enter a location for your climb");
				return false;
			} 
			
			if(climber.value === ""){
				alert("Please enter the name of the climber");
				return false;
			} 
		}


	function showAll(){
		clearTable();
		const Http = new XMLHttpRequest();
		const url = 'http://34.89.31.27:9001/boulder/showAll';
		console.log(url);
		Http.open('GET', url);
		Http.onreadystatechange = function(){
			let data;
			if (Http.readyState === 4) {
				data = JSON.parse(Http.responseText);
				data.forEach(function (item) {
					let table = document.getElementById("BoulderTable");
					let newRow = document.createElement("tr");
					let tid = newRow.appendChild(document.createElement('td'));
					let tGrade = newRow.appendChild(document.createElement('td'));
					let tDateNum = newRow.appendChild(document.createElement('td'));
					let tLocation = newRow.appendChild(document.createElement('td'));
					let tClimber = newRow.appendChild(document.createElement('td'));


					//Creates the button
					let deleteButton = document.createElement('span');
					//Styling
					deleteButton.className = "glyphicon glyphicon-remove";
					deleteButton.style.color = "red";
					//Function to control what happens when you press the button
					deleteButton.onclick = function(){
						deleteButton.id= item.id;
						//Calls a function to handle your delete request
						deleteBoulder(deleteButton.id);
					};
					//Adds a button to each row of the table
					newRow.appendChild(deleteButton);






					tid.innerHTML = item.id;
					tGrade.innerHTML = item.grade;
					tDateNum.innerHTML = item.dateNum;
					tLocation.innerHTML = item.location;
					tClimber.innerHTML = item.climber;

					table.appendChild(newRow);
				});
			}
		};
	Http.send();
	}



	function findByIndex(){
		clearTable();
		const Http = new XMLHttpRequest();
		const url = 'http://34.89.31.27:9001/boulder/findBy/index/1';
		Http.open('GET', url);
		Http.onreadystatechange = function(){
			let data;
			if (Http.readyState === 4 && Http.status ===200) {
				data = JSON.parse(Http.responseText);
				let table = document.getElementById("BoulderTable");
				let newRow = document.createElement("tr");
				let tGrade = newRow.appendChild(document.createElement('td'));
				let tDateNum = newRow.appendChild(document.createElement('td'));
				let tLocation = newRow.appendChild(document.createElement('td'));
				let tClimber = newRow.appendChild(document.createElement('td'));
				tGrade.innerHTML = data.grade;
				tDateNum.innerHTML = data.dateNum;
				tLocation.innerHTML = data.location;
				tClimber.innerHTML = data.climber;

				table.appendChild(newRow);

			}
		};
	Http.send();
	}


	function findByGrade(){
		clearTable();
		const Http = new XMLHttpRequest();
		const url = 'http://34.89.31.27:9001/boulder/findBy/grade/{G}';
		Http.open('GET', url);
		Http.onreadystatechange = function(){
			let data;
			if (Http.readyState === 4) {
				data = JSON.parse(Http.responseText);
				data.forEach(function (item) {
					let table = document.getElementById("BoulderTable");
					let newRow = document.createElement("tr");
					let tGrade = newRow.appendChild(document.createElement('td'));
					let tDateNum = newRow.appendChild(document.createElement('td'));
					let tLocation = newRow.appendChild(document.createElement('td'));
					let tClimber = newRow.appendChild(document.createElement('td'));
					tGrade.innerHTML = data.grade;
					tDateNum.innerHTML = data.dateNum;
					tLocation.innerHTML = data.location;
					tClimber.innerHTML = data.climber;

					table.appendChild(newRow);
				});
			}
		};
	Http.send();
	}


	function findByGradeGreaterThan(){
		clearTable();
		const Http = new XMLHttpRequest();
		const url = 'http://34.89.31.27:9001/boulder/findBy/gradeGreaterThan/{G}';
		Http.open('GET', url);
		Http.onreadystatechange = function(){
			let data;
			if (Http.readyState === 4) {
				data = JSON.parse(Http.responseText);
				data.forEach(function (item) {
					let table = document.getElementById("BoulderTable");
					let newRow = document.createElement("tr");
					let tGrade = newRow.appendChild(document.createElement('td'));
					let tDateNum = newRow.appendChild(document.createElement('td'));
					let tLocation = newRow.appendChild(document.createElement('td'));
					let tClimber = newRow.appendChild(document.createElement('td'));
					tGrade.innerHTML = data.grade;
					tDateNum.innerHTML = data.dateNum;
					tLocation.innerHTML = data.location;
					tClimber.innerHTML = data.climber;

					table.appendChild(newRow);
				});
			}
		};
	Http.send();
	}
	

	function findByGradeGreaterThanEqual(){
		clearTable();
		const Http = new XMLHttpRequest();
		const url = 'http://34.89.31.27:9001/Boulder/findBy/gradeGreaterThanEqual/{G}';
		Http.open('GET', url);
		Http.onreadystatechange = function(){
			let data;
			if (Http.readyState === 4) {
				data = JSON.parse(Http.responseText);
				data.forEach(function (item) {
					let table = document.getElementById("BoulderTable");
					let newRow = document.createElement("tr");
					let tGrade = newRow.appendChild(document.createElement('td'));
					let tDateNum = newRow.appendChild(document.createElement('td'));
					let tLocation = newRow.appendChild(document.createElement('td'));
					let tClimber = newRow.appendChild(document.createElement('td'));
					tGrade.innerHTML = data.grade;
					tDateNum.innerHTML = data.dateNum;
					tLocation.innerHTML = data.location;
					tClimber.innerHTML = data.climber;

					table.appendChild(newRow);
				});
			}
		};
	Http.send();
	}


	function findByGradeLessThan(){
		clearTable();
		const Http = new XMLHttpRequest();
		const url = 'http://34.89.31.27:9001/boulder/findBy/gradeLessThan/{G}';
		Http.open('GET', url);
		Http.onreadystatechange = function(){
			let data;
			if (Http.readyState === 4) {
				data = JSON.parse(Http.responseText);
				data.forEach(function (item) {
					let table = document.getElementById("BoulderTable");
					let newRow = document.createElement("tr");
					let tGrade = newRow.appendChild(document.createElement('td'));
					let tDateNum = newRow.appendChild(document.createElement('td'));
					let tLocation = newRow.appendChild(document.createElement('td'));
					let tClimber = newRow.appendChild(document.createElement('td'));
					tGrade.innerHTML = data.grade;
					tDateNum.innerHTML = data.dateNum;
					tLocation.innerHTML = data.location;
					tClimber.innerHTML = data.climber;

					table.appendChild(newRow);
				});
			}
		};
	Http.send();
	}

	function findByGradeLessThanEqual(){
		clearTable();
		const Http = new XMLHttpRequest();
		const url = 'http://34.89.31.27:9001/boulder/findBy/gradeLessThanEqual/{G}';
		Http.open('GET', url);
		Http.onreadystatechange = function(){
			let data;
			if (Http.readyState === 4) {
				data = JSON.parse(Http.responseText);
				data.forEach(function (item) {
					let table = document.getElementById("BoulderTable");
					let newRow = document.createElement("tr");
					let tGrade = newRow.appendChild(document.createElement('td'));
					let tDateNum = newRow.appendChild(document.createElement('td'));
					let tLocation = newRow.appendChild(document.createElement('td'));
					let tClimber = newRow.appendChild(document.createElement('td'));
					tGrade.innerHTML = data.grade;
					tDateNum.innerHTML = data.dateNum;
					tLocation.innerHTML = data.location;
					tClimber.innerHTML = data.climber;

					table.appendChild(newRow);
				});
			}
		};
	Http.send();
	}

	function findByGradeBetween(){
		clearTable();
		const Http = new XMLHttpRequest();
		const url = 'http://34.89.31.27:9001/boulder/findBy/gradeBetween/{G1}/{G2}';
		Http.open('GET', url);
		Http.onreadystatechange = function(){
			let data;
			if (Http.readyState === 4) {
				data = JSON.parse(Http.responseText);
				data.forEach(function (item) {
					let table = document.getElementById("BoulderTable");
					let newRow = document.createElement("tr");
					let tGrade = newRow.appendChild(document.createElement('td'));
					let tDateNum = newRow.appendChild(document.createElement('td'));
					let tLocation = newRow.appendChild(document.createElement('td'));
					let tClimber = newRow.appendChild(document.createElement('td'));
					tGrade.innerHTML = data.grade;
					tDateNum.innerHTML = data.dateNum;
					tLocation.innerHTML = data.location;
					tClimber.innerHTML = data.climber;

					table.appendChild(newRow);
				});
			}
		};
	Http.send();
	}

	function findByClimber(){
		clearTable();
		const Http = new XMLHttpRequest();
		const url = 'http://34.89.31.27:9001/boulder/findBy/Climber/{C}';
		Http.open('GET', url);
		Http.onreadystatechange = function(){
			let data;
			if (Http.readyState === 4) {
				data = JSON.parse(Http.responseText);
				data.forEach(function (item) {
					let table = document.getElementById("BoulderTable");
					let newRow = document.createElement("tr");
					let tGrade = newRow.appendChild(document.createElement('td'));
					let tDateNum = newRow.appendChild(document.createElement('td'));
					let tLocation = newRow.appendChild(document.createElement('td'));
					let tClimber = newRow.appendChild(document.createElement('td'));
					tGrade.innerHTML = data.grade;
					tDateNum.innerHTML = data.dateNum;
					tLocation.innerHTML = data.location;
					tClimber.innerHTML = data.climber;

					table.appendChild(newRow);
				});
			}
		};
	Http.send();
	}

	function findByDateNum(){
		clearTable();
		const Http = new XMLHttpRequest();
		const url = 'http://34.89.31.27:9001/boulder/findBy/Date/{D}';
		Http.open('GET', url);
		Http.onreadystatechange = function(){
			let data;
			if (Http.readyState === 4) {
				data = JSON.parse(Http.responseText);
				data.forEach(function (item) {
					let table = document.getElementById("BoulderTable");
					let newRow = document.createElement("tr");
					let tGrade = newRow.appendChild(document.createElement('td'));
					let tDateNum = newRow.appendChild(document.createElement('td'));
					let tLocation = newRow.appendChild(document.createElement('td'));
					let tClimber = newRow.appendChild(document.createElement('td'));
					tGrade.innerHTML = data.grade;
					tDateNum.innerHTML = data.dateNum;
					tLocation.innerHTML = data.location;
					tClimber.innerHTML = data.climber;

					table.appendChild(newRow);
				});
			}
		};
	Http.send();
	}

	function findByLocation(){
		clearTable();
		const Http = new XMLHttpRequest();
		const url = 'http://34.89.31.27:9001/boulder/findBy/location/{L}';
		Http.open('GET', url);
		Http.onreadystatechange = function(){
			let data;
			if (Http.readyState === 4) {
				data = JSON.parse(Http.responseText);
				data.forEach(function (item) {
					let table = document.getElementById("BoulderTable");
					let newRow = document.createElement("tr");
					let tGrade = newRow.appendChild(document.createElement('td'));
					let tDateNum = newRow.appendChild(document.createElement('td'));
					let tLocation = newRow.appendChild(document.createElement('td'));
					let tClimber = newRow.appendChild(document.createElement('td'));
					tGrade.innerHTML = data.grade;
					tDateNum.innerHTML = data.dateNum;
					tLocation.innerHTML = data.location;
					tClimber.innerHTML = data.climber;

					table.appendChild(newRow);
				});
			}
		};
	Http.send();
	}


	function addBoulder(){
		if(checkValues() === false){
			return false;
		}
		const url = 'http://34.89.31.27:9001/boulder/add';
		const http = new XMLHttpRequest();
		http.onload = function(){
			showAll();
		};
		http.open("POST", url, true);
		http.setRequestHeader("Content-Type", "application/json");

		let gradeF = document.getElementById("grade");
		let dateF = document.getElementById("dateNum");
		let locationF = document.getElementById("location");
		let climberF = document.getElementById("climber");
		console.log(gradeF.value);
		console.log(dateF.value);
		console.log(locationF.value);
		console.log(climberF.value);
		let data = JSON.stringify({"id": "", "grade": gradeF.value, "dateNum": dateF.value, "location": locationF.value, "climber": climberF.value});
		console.log(data);
		http.send(data);
		return false;
	}

	function deleteBoulder(url2){
		const url = 'http://34.89.31.27:9001/boulder/delete/' + url2;
		const http = new XMLHttpRequest();
		http.open("DELETE", url, true);
		http.send();
		http.onreadystatechange = function(){
			if(http.readyState === 4){
				showAll();
			}
		}
	}


	</script>
	<input type = "button" value = "Show all" onclick = "showAll()">
	<input type = "button" value = "Find by index" onclick = "findByIndex()">
	<input type = "button" value = "Find By Grade" onclick = "findByGrade()">
	<input type = "button" value = "Find By Grade Greater Than" onclick = "findByGradeGreaterThan()">
	<input type = "button" value = "Find By Grade Greater Than Equal To" onclick = "findByGradeGreaterThanEqual()">
	<input type = "button" value = "Find By Grade Less Than" onclick = "findByGradeLessThan()">
	<input type = "button" value = "Find By Grade Less Than Equal To" onclick = "findByGradeLessThanEqual()">
	<input type = "button" value = "Find By Grade Between" onclick = "findByGradeBetween()">
	<input type = "button" value = "Find By Climber" onclick = "findByClimber()">
	<input type = "button" value = "Find By Date" onclick = "findByDateNum()">
	<input type = "button" value = "Find By Location" onclick = "findByLocation()">


	<form method="post" onsubmit="return addBoulder()">
		Grade:<input type="text" id="grade" Name="grade">
		Date:<input type="text" id="dateNum" Name="dateNum">
		Location:<input type="text" id="location" Name="location">
		Climber:<input type="text" id="climber" Name="climber">
		<input type="submit">
	</form>



</body>


</html>
